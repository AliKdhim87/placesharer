{"version":3,"sources":["shared/context/auth-context.js","shared/context/users/usersContext.js","shared/hooks/http-hook.js","shared/component/UIElements/LoadingSpinner.js","shared/component/UIElements/Backdrop.js","shared/context/message-context.js","shared/hooks/auth-hook.js","shared/component/Navigation/MainHeader.js","shared/component/Navigation/SideDrawer.js","shared/component/Navigation/NavLinks.js","shared/component/Navigation/MainNavigation.js","users/pages/Social.js","shared/context/users/UsersState.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","token","userId","login","logout","usersContext","useHttpClient","useState","isLoading","setIsLoading","error","setError","activeHttpRequests","useRef","sendRequest","useCallback","url","a","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","res","json","data","filter","reqCtrl","ok","Error","message","useEffect","forEach","abortCtrl","abort","clearError","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","MessageContext","messagesData","id","textedUser","logoutTimer","MainHeader","children","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","NavLinks","auth","useContext","user","UsersContext","to","exact","Avatar","src","image","alt","name","MainNavigation","drawerIsOpen","setDrawerIsOpen","closeDrawerHandler","style","width","margin","Social","URL","window","location","searchParams","get","uId","socialLog","UsersState","users","setUsers","setUser","processedUsers","setProcessedUsers","sortBy","setSortBy","getUsers","searchValue","process","Authorization","userData","console","Provider","value","sendFriendRequestHandler","prevValue","Messages","React","lazy","ForgetPassword","ResetEmail","Auth","UserProfileNav","User","Users","Friends","NewPlace","UserPlaces","UpdatePlace","BucketList","Place","RegisterConfirmation","App","routes","setToken","tokenExpirationDate","setTokenExpirationDate","setUserId","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","path","fallback","render"],"mappings":"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","file":"static/js/main.02696ace.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\nexport const AuthContext = createContext({\r\n  isLoggedIn: false,\r\n  token: null,\r\n  userId: null,\r\n  login: () => {},\r\n  logout: () => {},\r\n});\r\n","import { createContext } from \"react\";\r\nconst usersContext = createContext();\r\nexport default usersContext;\r\n","import { useState, useCallback, useRef, useEffect } from 'react';\r\nconst useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n    setIsLoading(true);\r\n    const httpAbortCtrl = new AbortController();\r\n    activeHttpRequests.current.push(httpAbortCtrl);\r\n    try {\r\n      const res = await fetch(url, {\r\n        method,\r\n        body,\r\n        headers,\r\n        signal: httpAbortCtrl.signal,\r\n      });\r\n      const data = await res.json();\r\n      activeHttpRequests.current = activeHttpRequests.current.filter(\r\n        reqCtrl => reqCtrl !== httpAbortCtrl,\r\n      );\r\n      if (!res.ok) {\r\n        throw new Error(data.message);\r\n      }\r\n      setIsLoading(false);\r\n      return data;\r\n    } catch (error) {\r\n      setError(error.message || 'Something went wrong, please try again.');\r\n      setIsLoading(false);\r\n      throw error;\r\n    }\r\n  }, []);\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n  useEffect(() => {\r\n    return () => {\r\n      activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\nexport default useHttpClient;\r\n","import React from 'react';\r\n\r\nimport './LoadingSpinner.css';\r\n\r\nconst LoadingSpinner = props => {\r\n  return (\r\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\r\n      <div className=\"lds-dual-ring\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst Backdrop = props => {\r\n  return ReactDOM.createPortal(\r\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\r\n    document.getElementById('backdrop-hook')\r\n  );\r\n};\r\n\r\nexport default Backdrop;\r\n","import { createContext } from \"react\";\r\nexport const MessageContext = createContext({\r\n  messagesData: [], // to set all the messages involving the id below\r\n  id: \"\", // to set the texted person object id\r\n  textedUser: \"\",\r\n});\r\n","import { useState, useEffect, useCallback } from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(false);\r\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n  const [userId, setUserId] = useState(false);\r\n\r\n  const login = useCallback((uid, token, expirationDate) => {\r\n    setToken(token);\r\n    setUserId(uid);\r\n    const tokenExpirationDate = expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n    setTokenExpirationDate(tokenExpirationDate);\r\n    localStorage.setItem(\r\n      'userData',\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token,\r\n        expiration: tokenExpirationDate.toISOString(),\r\n      }),\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setTokenExpirationDate(null);\r\n    setUserId(null);\r\n\r\n    localStorage.removeItem('userData');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpirationDate) {\r\n      const remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\r\n      logoutTimer = setTimeout(logout, remainingTime);\r\n    } else {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [token, logout, tokenExpirationDate]);\r\n\r\n  useEffect(() => {\r\n    const storedData = JSON.parse(localStorage.getItem('userData'));\r\n    if (storedData && storedData.token && new Date(storedData.expiration) > new Date()) {\r\n      login(storedData.userId, storedData.token, new Date(storedData.expiration));\r\n    }\r\n  }, [login]);\r\n  return { token, login, logout, userId };\r\n};\r\n","import React from \"react\";\r\n\r\nimport \"./MainHeader.css\";\r\n\r\nconst MainHeader = props => {\r\n  return <header className='main-header'>{props.children}</header>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport \"./SideDrawer.css\";\r\nconst SideDrawer = props => {\r\n  const content = (\r\n    <CSSTransition\r\n      in={props.show}\r\n      timeout={200}\r\n      classNames='slide-in-left'\r\n      mountOnEnter\r\n      unmountOnExit\r\n    >\r\n      <aside className='side-drawer' onClick={props.onClick}>\r\n        {props.children}\r\n      </aside>\r\n    </CSSTransition>\r\n  );\r\n  return ReactDOM.createPortal(\r\n    content,\r\n    document.getElementById(\"drawer-hooks\")\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React, { useContext, Fragment } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport \"./NavLinks.css\";\r\nimport { AuthContext } from \"../../context/auth-context\";\r\nimport UsersContext from \"../../context/users/usersContext\";\r\nconst NavLinks = (props) => {\r\n  const auth = useContext(AuthContext);\r\n  const usersContext = useContext(UsersContext);\r\n  const { user } = usersContext;\r\n\r\n  return (\r\n    <ul className=\"nav-links no-select\">\r\n      <li>\r\n        <NavLink to=\"/\" exact>\r\n          ALL USERS\r\n        </NavLink>\r\n      </li>\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to={`/${auth.userId}/places`}>MY PLACES</NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to=\"/places/new\">ADD PLACES</NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <Fragment>\r\n          <li>\r\n            <NavLink className=\"avatar-holder\" to={`/${auth.userId}/my`}>\r\n              MY\r\n            </NavLink>\r\n          </li>\r\n          {user && <Avatar src={user.image} alt={user.name} />}\r\n        </Fragment>\r\n      )}\r\n\r\n      {!auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink to=\"/auth\">AUTHENTICATE</NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <button onClick={auth.logout}>LOGOUT</button>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default NavLinks;\r\n","import React, { Fragment, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport MainHeader from './MainHeader';\r\nimport SideDrawer from './SideDrawer';\r\nimport NavLinks from './NavLinks';\r\nimport Backdrop from '../UIElements/Backdrop';\r\nimport './MainNavigation.css';\r\n\r\nconst MainNavigation = props => {\r\n\tconst [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n\tconst openDrawerHandler = () => {\r\n\t\tsetDrawerIsOpen(true);\r\n\t};\r\n\tconst closeDrawerHandler = () => {\r\n\t\tsetDrawerIsOpen(false);\r\n\t};\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\r\n\r\n\t\t\t<SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\r\n\t\t\t\t<nav className=\"main-navigation__drawer-nav\">\r\n\t\t\t\t\t<NavLinks />\r\n\t\t\t\t</nav>\r\n\t\t\t</SideDrawer>\r\n\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<button className=\"main-navigation__menu-btn\" onClick={openDrawerHandler}>\r\n\t\t\t\t\t<span />\r\n\t\t\t\t\t<span />\r\n\t\t\t\t\t<span />\r\n\t\t\t\t</button>\r\n\t\t\t\t<h1 className=\"main-navigation__title no-select\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc=\"/images/logo-yp-2.png\"\r\n\t\t\t\t\t\talt=\"logo\"\r\n\t\t\t\t\t\tstyle={{ width: \"3rem\", margin: \"0 0.5rem\" }}/>\r\n\t\t\t\t\t<Link to=\"/\">YourPlaces</Link>\r\n\t\t\t\t</h1>\r\n\t\t\t\t<nav className=\"main-navigation__header-nav\">\r\n\t\t\t\t\t<NavLinks />\r\n\t\t\t\t</nav>\r\n\t\t\t</MainHeader>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default MainNavigation;\r\n","import { useEffect, useContext } from \"react\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\n\r\nexport default function Social() {\r\n  const auth = useContext(AuthContext);\r\n  const socialLog = () => {\r\n    const token = new URL(window.location).searchParams.get(\"token\");\r\n    const uId = new URL(window.location).searchParams.get(\"userId\");\r\n    auth.login(uId, token);\r\n  };\r\n  useEffect(() => {\r\n    socialLog();\r\n  });\r\n  return null;\r\n}\r\n","import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport useHttpClient from \"../../hooks/http-hook\";\r\nimport { AuthContext } from \"../auth-context\";\r\nimport UsersContext from \"./usersContext\";\r\nconst UsersState = (props) => {\r\n  const auth = useContext(AuthContext);\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [user, setUser] = useState({});\r\n  const [processedUsers, setProcessedUsers] = useState([]);\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n  const [sortBy, setSortBy] = useState(\" \");\r\n\r\n  const getUsers = useCallback(\r\n    async (searchValue) => {\r\n      try {\r\n        const data = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/users?sortBy=${sortBy}&&search=${searchValue}`\r\n        );\r\n        setUsers(data.users);\r\n\r\n        let userData;\r\n        if (auth.token) {\r\n          userData = await sendRequest(\r\n            `${process.env.REACT_APP_BACKEND_URL}/users/me`,\r\n            \"GET\",\r\n            null,\r\n            {\r\n              Authorization: \"Bearer \" + auth.token,\r\n            }\r\n          );\r\n        }\r\n        setUser(userData);\r\n        setUsers(data.users);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    [auth.token, sendRequest, sortBy]\r\n  );\r\n\r\n  useEffect(() => {\r\n    getUsers(\"\");\r\n  }, [processedUsers, auth.token, sendRequest, sortBy, getUsers]);\r\n\r\n  const sendFriendRequestHandler = (id) => {\r\n    setProcessedUsers((prevValue) => [...prevValue, id]);\r\n  };\r\n  return (\r\n    <UsersContext.Provider\r\n      value={{\r\n        isLoading,\r\n        error,\r\n        clearError,\r\n        users,\r\n        user,\r\n        setSortBy,\r\n        sendFriendRequestHandler,\r\n        getUsers,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </UsersContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UsersState;\r\n","import React, { Suspense, useState } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport MainNavigation from \"./shared/component/Navigation/MainNavigation\";\r\nimport { AuthContext } from \"./shared/context/auth-context\";\r\nimport { MessageContext } from \"./shared/context/message-context\";\r\nimport { useAuth } from \"./shared/hooks/auth-hook\";\r\nimport LoadingSpinner from \"./shared/component/UIElements/LoadingSpinner\";\r\nimport Social from \"./users/pages/Social\";\r\n\r\nimport UsersState from \"./shared/context/users/UsersState\";\r\nconst Messages = React.lazy(() => import(\"./users/pages/Messages\"));\r\nconst ForgetPassword = React.lazy(() =>\r\n  import(\"./users/components/ForgetPassword\")\r\n);\r\nconst ResetEmail = React.lazy(() => import(\"./users/components/ResetEmail\"));\r\n\r\nconst Auth = React.lazy(() => import(\"./users/pages/Auth\"));\r\nconst UserProfileNav = React.lazy(() =>\r\n  import(\"./users/components/UserProfileNav\")\r\n);\r\nconst User = React.lazy(() => import(\"./users/pages/User\"));\r\nconst Users = React.lazy(() => import(\"./users/pages/Users\"));\r\nconst Friends = React.lazy(() => import(\"./friends/pages/Friends\"));\r\nconst NewPlace = React.lazy(() => import(\"./places/pages/NewPlace\"));\r\nconst UserPlaces = React.lazy(() => import(\"./places/pages/UserPlaces\"));\r\nconst UpdatePlace = React.lazy(() => import(\"./places/pages/UpdatePlace\"));\r\nconst BucketList = React.lazy(() => import(\"./places/components/BucketList\"));\r\nconst Place = React.lazy(() => import(\"./places/pages/Place\"));\r\nconst RegisterConfirmation = React.lazy(() =>\r\n  import(\"./users/components/RegisterConfirmation\")\r\n);\r\nconst App = () => {\r\n  const { token, login, logout, userId } = useAuth();\r\n  const [messagesData] = useState([]);\r\n\r\n  let routes;\r\n  if (token) {\r\n    routes = (\r\n      <Switch>\r\n        <Route path=\"/:userId/my\">\r\n          <User />\r\n        </Route>\r\n        <Route path=\"/\" exact>\r\n          <Users />\r\n        </Route>\r\n\r\n        <Route path=\"/:userId/places\" exact>\r\n          <UserPlaces />\r\n        </Route>\r\n        <Route path=\"/places/new\" exact>\r\n          <NewPlace />\r\n        </Route>\r\n        <Route path=\"/places/:placeId\" exact>\r\n          <Place />\r\n        </Route>\r\n        <Route path=\"/places/:placeId/edit\">\r\n          <UpdatePlace />\r\n        </Route>\r\n        <Route path=\"/:userId/friends\" exact>\r\n          <Friends />\r\n        </Route>\r\n        <Route path=\"/:userId/bucketlist\">\r\n          <BucketList />\r\n        </Route>\r\n        <Route path=\"/:userId/messages\">\r\n          <UserProfileNav />\r\n          <Messages />\r\n        </Route>\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    );\r\n  } else {\r\n    routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact>\r\n          <Users />\r\n        </Route>\r\n        <Route path=\"/:userId/places\" exact>\r\n          <UserPlaces />\r\n        </Route>\r\n        <Route path=\"/places/:placeId\" exact>\r\n          <Place />\r\n        </Route>\r\n        <Route path=\"/auth\">\r\n          <Auth />\r\n        </Route>\r\n        <Route path=\"/social\">\r\n          <Social />\r\n        </Route>\r\n        <Route path=\"/forgetpassword\">\r\n          <ForgetPassword />\r\n        </Route>\r\n        <Route path=\"/resetpassword/:token\">\r\n          <ResetEmail />\r\n        </Route>\r\n        <Route path=\"/confirm/:token\">\r\n          <RegisterConfirmation />\r\n        </Route>\r\n        <Redirect to=\"/auth\" />\r\n      </Switch>\r\n    );\r\n  }\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLoggedIn: !!token,\r\n        token,\r\n        login,\r\n        logout,\r\n        userId,\r\n      }}\r\n    >\r\n      <MessageContext.Provider value={{ messagesData }}>\r\n        <UsersState>\r\n          <Router>\r\n            <MainNavigation />\r\n            <main>\r\n              <Suspense\r\n                fallback={\r\n                  <div className=\"center\">\r\n                    <LoadingSpinner asOverlay />\r\n                  </div>\r\n                }\r\n              >\r\n                {routes}\r\n              </Suspense>\r\n            </main>\r\n          </Router>\r\n        </UsersState>\r\n      </MessageContext.Provider>\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}