(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[12],{130:function(e,a,t){},167:function(e,a,t){"use strict";t.r(a);var n=t(4),r=t.n(n),l=t(8),s=t(14),c=t(1),i=t(0),o=t.n(i),u=t(3),p=(t(130),t(30)),m=t(22),d=t(26),b=t(21),f=t(16),v=t(89),E=t(15),g=t(31),O=t(23),h=t(10),j=t(141);a.default=function(){var e=Object(i.useContext)(h.a),a=Object(i.useState)(!0),t=Object(c.a)(a,2),n=t[0],w=t[1],k=Object(E.a)(),N=k.isLoading,S=k.error,x=k.sendRequest,I=k.clearError,_=Object(i.useState)(!0),P=Object(c.a)(_,2),y=P[0],T=P[1],C=Object(g.a)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),G=Object(c.a)(C,3),L=G[0],R=G[1],V=G[2],F=function(){var a=Object(l.a)(r.a.mark((function a(t){var l,s,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),!n){a.next=13;break}return a.prev=2,a.next=5,x("".concat("https://placesharer.herokuapp.com/api","/users/login"),"POST",JSON.stringify({email:L.inputs.email.value,password:L.inputs.password.value}),{"Content-Type":"application/json"});case 5:l=a.sent,e.login(l.userId,l.token,null,l.friendStatus),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(2);case 11:a.next=27;break;case 13:return a.prev=13,(s=new FormData).append("email",L.inputs.email.value),s.append("password",L.inputs.password.value),s.append("name",L.inputs.name.value),s.append("image",L.inputs.image.value),a.next=21,x("".concat("https://placesharer.herokuapp.com/api","/users/signup"),"POST",s);case 21:c=a.sent,e.login(c.userId,c.token),a.next=27;break;case 25:a.prev=25,a.t1=a.catch(13);case 27:case"end":return a.stop()}}),a,null,[[2,9],[13,25]])})));return function(e){return a.apply(this,arguments)}}();return o.a.createElement(i.Fragment,null,o.a.createElement(b.a,{error:S,onClear:I}),o.a.createElement(d.a,{className:"authentication no-select"},N&&o.a.createElement(f.a,{asOverlay:!0}),o.a.createElement("h2",null,"Login Required"),o.a.createElement("hr",null),o.a.createElement("form",{onSubmit:F},y&&o.a.createElement("div",null,o.a.createElement("h3",null,"Log in with"),o.a.createElement("a",{className:"socialBtn",href:"".concat("https://placesharer.herokuapp.com/api","/users/facebook")},o.a.createElement(j.a,null),o.a.createElement("span",{className:"socialName"},"Facebook")),o.a.createElement("a",{className:"socialBtn",href:"".concat("https://placesharer.herokuapp.com/api","/users/google")},o.a.createElement(j.b,null),o.a.createElement("span",{className:"socialName"},"Google")),o.a.createElement("h3",null,"______or______")),!n&&o.a.createElement(p.a,{id:"name",element:"input",type:"text",label:"Your Name",validators:[Object(O.c)()],errorText:"Please enter a valid name",onInput:R}),!n&&o.a.createElement(v.a,{center:!0,id:"image",onInput:R,errorText:"Please provide an image"}),o.a.createElement(p.a,{id:"email",element:"input",type:"email",label:"Email",isLoading:!0,validators:[Object(O.a)()],errorText:"Please enter a valid email address",onInput:R}),o.a.createElement(p.a,{id:"password",element:"input",type:"password",label:"Password",validators:[Object(O.b)(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:R}),o.a.createElement(m.a,{type:"submit",disabled:!L.isValid},n?"LOGIN":"SIGNUP"),n&&o.a.createElement(u.b,{to:"/forgetpassword"},o.a.createElement(m.a,null,"FORGOT PASSWORD"))),o.a.createElement(m.a,{inverse:!0,onClick:function(){n?V(Object(s.a)({},L.inputs,{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):V(Object(s.a)({},L.inputs,{name:void 0,image:void 0}),L.inputs.email.isValid&&L.inputs.password.isValid),w((function(e){return!e})),T((function(e){return!e}))}},"SWITCH TO ",n?"SIGNUP":"LOGIN")))}},89:function(e,a,t){"use strict";var n=t(1),r=t(0),l=t.n(r),s=(t(90),t(22));a.a=function(e){var a,t=e.id,c=e.center,i=e.onInput,o=e.errorText,u=Object(r.useState)(),p=Object(n.a)(u,2),m=p[0],d=p[1],b=Object(r.useState)(),f=Object(n.a)(b,2),v=f[0],E=f[1],g=Object(r.useState)(!1),O=Object(n.a)(g,2),h=O[0],j=O[1],w=Object(r.useRef)(),k=h;Object(r.useEffect)((function(){if(m){var e=new FileReader;e.onload=function(){E(e.result)},e.readAsDataURL(m)}}),[m]);return l.a.createElement("div",{className:"form-control"},l.a.createElement("input",{ref:w,id:t,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(e){e.target.files||1===e.target.files.length?(a=e.target.files[0],d(a),j(!0),k=!0):(j(!1),k=!1),i(t,a,k)}}),l.a.createElement("div",{className:"image-upload ".concat(c&&"center")},l.a.createElement("div",{className:"image-upload__preview"},v&&l.a.createElement("img",{src:v,alt:"Preview"})," ",!v&&l.a.createElement("p",null,"Please pick an image.")),l.a.createElement(s.a,{type:"button",onClick:function(){return w.current.click()}},"PICK IMAGE")),!h&&l.a.createElement("p",null,o))}},90:function(e,a,t){}}]);
//# sourceMappingURL=12.8a5a63e8.chunk.js.map