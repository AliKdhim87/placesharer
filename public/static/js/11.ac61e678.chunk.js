(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[11],{138:function(e,t,a){},139:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return C}));var n=a(4),r=a.n(n),c=a(8),l=a(1),o=a(0),i=a.n(o),u=a(12),m=a(14),s=a(32),p=a(15),d=a(21),f=a(16),v=a(30),b=a(22),h=a(23),E=a(31),O=a(10);a(138);function j(e){var t=e.addComment,a=e.placeId,n=Object(o.useContext)(O.a),u=Object(p.a)(),m=u.isLoading,s=u.error,j=u.sendRequest,x=u.clearError,g=Object(E.a)({title:{value:"",isValid:!1},comment:{value:"",isValid:!1}},!1),k=Object(l.a)(g,3),y=k[0],w=k[1],C=k[2],N=function(){var e=Object(c.a)(r.a.mark((function e(l){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.preventDefault(),function(){var e=Object(c.a)(r.a.mark((function e(){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("".concat("https://placesharer.herokuapp.com/api","/places/").concat(a,"/comments"),"POST",JSON.stringify({title:y.inputs.title.value,comment:y.inputs.comment.value}),{"Content-Type":"application/json",Authorization:"Bearer "+n.token});case 3:c=e.sent,t(c.comment),C({title:{value:"",isValid:!1},comment:{value:"",isValid:!1}},!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"comment-form-container"},i.a.createElement(o.Fragment,null,i.a.createElement(d.a,{error:s,onClear:x}),m&&i.a.createElement(f.a,null),i.a.createElement("form",{className:"comment-form",onSubmit:N},i.a.createElement(v.a,{id:"title",element:"input",type:"text",label:"Title",validators:[Object(h.c)()],errorText:"Please enter a valid title.",onInput:w,initialValue:y.inputs.title.value}),i.a.createElement(v.a,{id:"comment",element:"textarea",label:"Message",validators:[Object(h.b)(5)],errorText:"Please enter a valid message (min. 5 characters).",onInput:w,initialValue:y.inputs.comment.value}),i.a.createElement(b.a,{type:"submit",disabled:!y.isValid},"GO FOR IT!"))))}a(139);function x(e){var t=Object(o.useState)(!1),a=Object(l.a)(t,2),n=a[0],m=a[1],s=e.comment,d=s._id,f=s.creator,j=s.title,x=s.comment,g=s.date,k=Object(p.a)().sendRequest,y=Object(o.useContext)(O.a),w=f&&y&&y.userId&&f._id===y.userId,C=Object(u.h)().placeId,N=Object(E.a)({title:{value:j,isValid:!1},comment:{value:x,isValid:!1}},!1),V=Object(l.a)(N,2),I=V[0],S=V[1],T=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k("".concat("https://placesharer.herokuapp.com/api","/places/").concat(C,"/comments/").concat(d),"DELETE",null,{Authorization:"Bearer ".concat(y.token)});case 3:e.removeComment(d),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),function(){var t=Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={title:I.inputs.title.value,comment:I.inputs.comment.value},t.next=4,k("".concat("https://placesharer.herokuapp.com/api","/places/").concat(C,"/comments/").concat(d),"PATCH",JSON.stringify(a),{"Content-Type":"application/json",Authorization:"Bearer "+y.token});case 4:e.updateComment(d,a),m(!1),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();console.log(g),console.log(typeof g);var D=new Date(g);D.toLocaleDateString("en-US"),console.log(D);return i.a.createElement("div",null,n?i.a.createElement("div",null,i.a.createElement("form",{className:"comment-update-form",onSubmit:_},i.a.createElement(v.a,{id:"title",element:"input",type:"text",label:"Title",validators:[Object(h.c)()],errorText:"Please enter a valid title.",onInput:S,initailValue:j,initailValid:!0}),i.a.createElement(v.a,{id:"comment",element:"textarea",label:"Message",validators:[Object(h.b)(5)],errorText:"Please enter a valid message (min. 5 characters).",onInput:S,initailValue:x,initailValid:!0}),i.a.createElement(b.a,{type:"submit",disabled:!I.isValid},"SAVE"))):i.a.createElement("div",{style:{border:"1px solid #008cff",color:"black",backgroundColor:"white",marginBottom:"10px",marginLeft:"10px",padding:"10px"}},i.a.createElement("h5",null,j),i.a.createElement("p",null,x),i.a.createElement("p",null,i.a.createElement("strong",null,"Date:")," ",function(e){return new Date(e).toLocaleString("en-NL")}(g)),i.a.createElement("p",null,i.a.createElement("strong",null,"From Whom:")," ",f?f.name:null),w&&i.a.createElement("button",{className:"edit-delete-button",style:{margin:"10px"},type:"button",onClick:T},"Delete"),w&&i.a.createElement("button",{className:"edit-delete-button",type:"button",onClick:function(){m((function(e){return!e}))}},"Edit")))}function g(e){var t=e.comments,a=e.removeComment,n=e.updateComment;return i.a.createElement("div",{style:{width:"100%"}},t&&t.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("h5",{style:{color:"white"}},i.a.createElement("span",null,t.length)," ","Comment",1===t.length?" ":"s"),t.map((function(e){return i.a.createElement(x,{key:e._id,comment:e,removeComment:a,updateComment:n})}))):i.a.createElement("div",{className:"comment-list"},"Be the first to comment"))}function k(e){var t=e.placeId,a=Object(p.a)(),n=a.isLoading,u=a.error,v=a.sendRequest,b=a.clearError,h=Object(o.useState)(),E=Object(l.a)(h,2),O=E[0],x=E[1];Object(o.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("".concat("https://placesharer.herokuapp.com/api","/places/").concat(t,"/comments"));case 3:a=e.sent,x(a.comments),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);return i.a.createElement("div",{className:"center flex-column width-60"},n&&i.a.createElement(f.a,null),i.a.createElement(d.a,{error:u,onClear:b}),i.a.createElement(j,{addComment:function(e){x((function(t){return[].concat(Object(s.a)(t),[e])}))},placeId:t,className:"width-60"}),!n&&i.a.createElement(g,{removeComment:function(e){x((function(t){return t.filter((function(t){return t._id!==e}))}))},updateComment:function(e,t){x((function(a){return a.map((function(a){return a._id===e?{_id:e,creator:Object(m.a)({},a.creator),title:t.title,comment:t.comment}:a}))}))},comments:O}))}a(91);var y=a(26),w=function(e){var t=e.place,a=t.name,n=t.image,r=t.title,c=t.address,l=t.description;return i.a.createElement("div",{className:"place-item"},i.a.createElement(y.a,{className:"place-item__content detailed-view"},i.a.createElement("div",{className:"place-item__image"},i.a.createElement("img",{src:n.imageUrl,alt:a})),i.a.createElement("div",{className:"place-item__info"},i.a.createElement("h2",null,r),i.a.createElement("h3",null,c),i.a.createElement("p",null,l))))};function C(){var e=Object(o.useState)({}),t=Object(l.a)(e,2),a=t[0],n=t[1],m=Object(p.a)(),s=m.isLoading,v=m.error,b=m.sendRequest,h=m.clearError,E=Object(u.h)().placeId;return Object(o.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("".concat("https://placesharer.herokuapp.com/api","/places/").concat(E));case 3:t=e.sent,n(t.place),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[b,E]),i.a.createElement("div",{className:"center",style:{display:"flex",flexDirection:"column"}},s&&i.a.createElement(f.a,null),i.a.createElement(d.a,{error:v,onClear:h}),!s&&a&&Object.keys(a).length>0&&i.a.createElement(w,{place:a}),i.a.createElement(k,{placeId:E}))}},91:function(e,t,a){}}]);
//# sourceMappingURL=11.ac61e678.chunk.js.map